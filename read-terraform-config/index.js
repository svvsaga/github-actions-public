var Fo=Object.create;var Z=Object.defineProperty,Bo=Object.defineProperties,Go=Object.getOwnPropertyDescriptor,ko=Object.getOwnPropertyDescriptors,$o=Object.getOwnPropertyNames,vr=Object.getOwnPropertySymbols,zo=Object.getPrototypeOf,yr=Object.prototype.hasOwnProperty,Ko=Object.prototype.propertyIsEnumerable;var mr=(e,r,t)=>r in e?Z(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,ee=(e,r)=>{for(var t in r||(r={}))yr.call(r,t)&&mr(e,t,r[t]);if(vr)for(var t of vr(r))Ko.call(r,t)&&mr(e,t,r[t]);return e},re=(e,r)=>Bo(e,ko(r)),_r=e=>Z(e,"__esModule",{value:!0});var o=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Vo=(e,r)=>{for(var t in r)Z(e,t,{get:r[t],enumerable:!0})},qr=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of $o(r))!yr.call(e,i)&&(t||i!=="default")&&Z(e,i,{get:()=>r[i],enumerable:!(n=Go(r,i))||n.enumerable});return e},D=(e,r)=>qr(_r(Z(e!=null?Fo(zo(e)):{},"default",!r&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Ho=(e=>(r,t)=>e&&e.get(r)||(t=qr(_r({}),r,1),e&&e.set(r,t),t))(typeof WeakMap!="undefined"?new WeakMap:0);var ve=o(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.toCommandProperties=L.toCommandValue=void 0;function Jo(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}L.toCommandValue=Jo;function Yo(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}L.toCommandProperties=Yo});var Sr=o(w=>{"use strict";var Wo=w&&w.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Xo=w&&w.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Qo=w&&w.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.hasOwnProperty.call(e,t)&&Wo(r,e,t);return Xo(r,e),r};Object.defineProperty(w,"__esModule",{value:!0});w.issue=w.issueCommand=void 0;var Zo=Qo(require("os")),br=ve();function wr(e,r,t){let n=new Tr(e,r,t);process.stdout.write(n.toString()+Zo.EOL)}w.issueCommand=wr;function ea(e,r=""){wr(e,{},r)}w.issue=ea;var xr="::",Tr=class{constructor(r,t,n){r||(r="missing.command"),this.command=r,this.properties=t,this.message=n}toString(){let r=xr+this.command;if(this.properties&&Object.keys(this.properties).length>0){r+=" ";let t=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let i=this.properties[n];i&&(t?t=!1:r+=",",r+=`${n}=${ta(i)}`)}}return r+=`${xr}${ra(this.message)}`,r}};function ra(e){return br.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function ta(e){return br.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var Pr=o(O=>{"use strict";var na=O&&O.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),ia=O&&O.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Or=O&&O.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.hasOwnProperty.call(e,t)&&na(r,e,t);return ia(r,e),r};Object.defineProperty(O,"__esModule",{value:!0});O.issueCommand=void 0;var Ar=Or(require("fs")),sa=Or(require("os")),oa=ve();function aa(e,r){let t=process.env[`GITHUB_${e}`];if(!t)throw new Error(`Unable to find environment variable for file command ${e}`);if(!Ar.existsSync(t))throw new Error(`Missing file at path: ${t}`);Ar.appendFileSync(t,`${oa.toCommandValue(r)}${sa.EOL}`,{encoding:"utf8"})}O.issueCommand=aa});var Ir=o(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});function ua(e){let r=e.protocol==="https:",t;if(Er(e))return t;let n;return r?n=process.env.https_proxy||process.env.HTTPS_PROXY:n=process.env.http_proxy||process.env.HTTP_PROXY,n&&(t=new URL(n)),t}ye.getProxyUrl=ua;function Er(e){if(!e.hostname)return!1;let r=process.env.no_proxy||process.env.NO_PROXY||"";if(!r)return!1;let t;e.port?t=Number(e.port):e.protocol==="http:"?t=80:e.protocol==="https:"&&(t=443);let n=[e.hostname.toUpperCase()];typeof t=="number"&&n.push(`${n[0]}:${t}`);for(let i of r.split(",").map(s=>s.trim().toUpperCase()).filter(s=>s))if(n.some(s=>s===i))return!0;return!1}ye.checkBypass=Er});var Nr=o(F=>{"use strict";var mg=require("net"),ca=require("tls"),Ne=require("http"),Rr=require("https"),la=require("events"),_g=require("assert"),fa=require("util");F.httpOverHttp=pa;F.httpsOverHttp=ha;F.httpOverHttps=da;F.httpsOverHttps=ga;function pa(e){var r=new P(e);return r.request=Ne.request,r}function ha(e){var r=new P(e);return r.request=Ne.request,r.createSocket=Cr,r.defaultPort=443,r}function da(e){var r=new P(e);return r.request=Rr.request,r}function ga(e){var r=new P(e);return r.request=Rr.request,r.createSocket=Cr,r.defaultPort=443,r}function P(e){var r=this;r.options=e||{},r.proxyOptions=r.options.proxy||{},r.maxSockets=r.options.maxSockets||Ne.Agent.defaultMaxSockets,r.requests=[],r.sockets=[],r.on("free",function(n,i,s,a){for(var u=Mr(i,s,a),l=0,c=r.requests.length;l<c;++l){var f=r.requests[l];if(f.host===u.host&&f.port===u.port){r.requests.splice(l,1),f.request.onSocket(n);return}}n.destroy(),r.removeSocket(n)})}fa.inherits(P,la.EventEmitter);P.prototype.addRequest=function(r,t,n,i){var s=this,a=De({request:r},s.options,Mr(t,n,i));if(s.sockets.length>=this.maxSockets){s.requests.push(a);return}s.createSocket(a,function(u){u.on("free",l),u.on("close",c),u.on("agentRemove",c),r.onSocket(u);function l(){s.emit("free",u,a)}function c(f){s.removeSocket(u),u.removeListener("free",l),u.removeListener("close",c),u.removeListener("agentRemove",c)}})};P.prototype.createSocket=function(r,t){var n=this,i={};n.sockets.push(i);var s=De({},n.proxyOptions,{method:"CONNECT",path:r.host+":"+r.port,agent:!1,headers:{host:r.host+":"+r.port}});r.localAddress&&(s.localAddress=r.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),I("making CONNECT request");var a=n.request(s);a.useChunkedEncodingByDefault=!1,a.once("response",u),a.once("upgrade",l),a.once("connect",c),a.once("error",f),a.end();function u(h){h.upgrade=!0}function l(h,d,y){process.nextTick(function(){c(h,d,y)})}function c(h,d,y){if(a.removeAllListeners(),d.removeAllListeners(),h.statusCode!==200){I("tunneling socket could not be established, statusCode=%d",h.statusCode),d.destroy();var g=new Error("tunneling socket could not be established, statusCode="+h.statusCode);g.code="ECONNRESET",r.request.emit("error",g),n.removeSocket(i);return}if(y.length>0){I("got illegal response body from proxy"),d.destroy();var g=new Error("got illegal response body from proxy");g.code="ECONNRESET",r.request.emit("error",g),n.removeSocket(i);return}return I("tunneling connection has established"),n.sockets[n.sockets.indexOf(i)]=d,t(d)}function f(h){a.removeAllListeners(),I(`tunneling socket could not be established, cause=%s
`,h.message,h.stack);var d=new Error("tunneling socket could not be established, cause="+h.message);d.code="ECONNRESET",r.request.emit("error",d),n.removeSocket(i)}};P.prototype.removeSocket=function(r){var t=this.sockets.indexOf(r);if(t!==-1){this.sockets.splice(t,1);var n=this.requests.shift();n&&this.createSocket(n,function(i){n.request.onSocket(i)})}};function Cr(e,r){var t=this;P.prototype.createSocket.call(t,e,function(n){var i=e.request.getHeader("host"),s=De({},t.options,{socket:n,servername:i?i.replace(/:.*$/,""):e.host}),a=ca.connect(0,s);t.sockets[t.sockets.indexOf(n)]=a,r(a)})}function Mr(e,r,t){return typeof e=="string"?{host:e,port:r,localAddress:t}:e}function De(e){for(var r=1,t=arguments.length;r<t;++r){var n=arguments[r];if(typeof n=="object")for(var i=Object.keys(n),s=0,a=i.length;s<a;++s){var u=i[s];n[u]!==void 0&&(e[u]=n[u])}}return e}var I;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?I=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:I=function(){};F.debug=I});var jr=o((bg,Dr)=>{Dr.exports=Nr()});var Lr=o(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});var me=require("http"),je=require("https"),Ur=Ir(),B,T;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(T=q.HttpCodes||(q.HttpCodes={}));var _;(function(e){e.Accept="accept",e.ContentType="content-type"})(_=q.Headers||(q.Headers={}));var R;(function(e){e.ApplicationJson="application/json"})(R=q.MediaTypes||(q.MediaTypes={}));function va(e){let r=Ur.getProxyUrl(new URL(e));return r?r.href:""}q.getProxyUrl=va;var ya=[T.MovedPermanently,T.ResourceMoved,T.SeeOther,T.TemporaryRedirect,T.PermanentRedirect],ma=[T.BadGateway,T.ServiceUnavailable,T.GatewayTimeout],_a=["OPTIONS","GET","DELETE","HEAD"],qa=10,ba=5,te=class extends Error{constructor(r,t){super(r);this.name="HttpClientError",this.statusCode=t,Object.setPrototypeOf(this,te.prototype)}};q.HttpClientError=te;var Ue=class{constructor(r){this.message=r}readBody(){return new Promise(async(r,t)=>{let n=Buffer.alloc(0);this.message.on("data",i=>{n=Buffer.concat([n,i])}),this.message.on("end",()=>{r(n.toString())})})}};q.HttpClientResponse=Ue;function wa(e){return new URL(e).protocol==="https:"}q.isHttps=wa;var _e=class{constructor(r,t,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=r,this.handlers=t||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(r,t){return this.request("OPTIONS",r,null,t||{})}get(r,t){return this.request("GET",r,null,t||{})}del(r,t){return this.request("DELETE",r,null,t||{})}post(r,t,n){return this.request("POST",r,t,n||{})}patch(r,t,n){return this.request("PATCH",r,t,n||{})}put(r,t,n){return this.request("PUT",r,t,n||{})}head(r,t){return this.request("HEAD",r,null,t||{})}sendStream(r,t,n,i){return this.request(r,t,n,i)}async getJson(r,t={}){t[_.Accept]=this._getExistingOrDefaultHeader(t,_.Accept,R.ApplicationJson);let n=await this.get(r,t);return this._processResponse(n,this.requestOptions)}async postJson(r,t,n={}){let i=JSON.stringify(t,null,2);n[_.Accept]=this._getExistingOrDefaultHeader(n,_.Accept,R.ApplicationJson),n[_.ContentType]=this._getExistingOrDefaultHeader(n,_.ContentType,R.ApplicationJson);let s=await this.post(r,i,n);return this._processResponse(s,this.requestOptions)}async putJson(r,t,n={}){let i=JSON.stringify(t,null,2);n[_.Accept]=this._getExistingOrDefaultHeader(n,_.Accept,R.ApplicationJson),n[_.ContentType]=this._getExistingOrDefaultHeader(n,_.ContentType,R.ApplicationJson);let s=await this.put(r,i,n);return this._processResponse(s,this.requestOptions)}async patchJson(r,t,n={}){let i=JSON.stringify(t,null,2);n[_.Accept]=this._getExistingOrDefaultHeader(n,_.Accept,R.ApplicationJson),n[_.ContentType]=this._getExistingOrDefaultHeader(n,_.ContentType,R.ApplicationJson);let s=await this.patch(r,i,n);return this._processResponse(s,this.requestOptions)}async request(r,t,n,i){if(this._disposed)throw new Error("Client has already been disposed.");let s=new URL(t),a=this._prepareRequest(r,s,i),u=this._allowRetries&&_a.indexOf(r)!=-1?this._maxRetries+1:1,l=0,c;for(;l<u;){if(c=await this.requestRaw(a,n),c&&c.message&&c.message.statusCode===T.Unauthorized){let h;for(let d=0;d<this.handlers.length;d++)if(this.handlers[d].canHandleAuthentication(c)){h=this.handlers[d];break}return h?h.handleAuthentication(this,a,n):c}let f=this._maxRedirects;for(;ya.indexOf(c.message.statusCode)!=-1&&this._allowRedirects&&f>0;){let h=c.message.headers.location;if(!h)break;let d=new URL(h);if(s.protocol=="https:"&&s.protocol!=d.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(await c.readBody(),d.hostname!==s.hostname)for(let y in i)y.toLowerCase()==="authorization"&&delete i[y];a=this._prepareRequest(r,d,i),c=await this.requestRaw(a,n),f--}if(ma.indexOf(c.message.statusCode)==-1)return c;l+=1,l<u&&(await c.readBody(),await this._performExponentialBackoff(l))}return c}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(r,t){return new Promise((n,i)=>{let s=function(a,u){a&&i(a),n(u)};this.requestRawWithCallback(r,t,s)})}requestRawWithCallback(r,t,n){let i;typeof t=="string"&&(r.options.headers["Content-Length"]=Buffer.byteLength(t,"utf8"));let s=!1,a=(l,c)=>{s||(s=!0,n(l,c))},u=r.httpModule.request(r.options,l=>{let c=new Ue(l);a(null,c)});u.on("socket",l=>{i=l}),u.setTimeout(this._socketTimeout||3*6e4,()=>{i&&i.end(),a(new Error("Request timeout: "+r.options.path),null)}),u.on("error",function(l){a(l,null)}),t&&typeof t=="string"&&u.write(t,"utf8"),t&&typeof t!="string"?(t.on("close",function(){u.end()}),t.pipe(u)):u.end()}getAgent(r){let t=new URL(r);return this._getAgent(t)}_prepareRequest(r,t,n){let i={};i.parsedUrl=t;let s=i.parsedUrl.protocol==="https:";i.httpModule=s?je:me;let a=s?443:80;return i.options={},i.options.host=i.parsedUrl.hostname,i.options.port=i.parsedUrl.port?parseInt(i.parsedUrl.port):a,i.options.path=(i.parsedUrl.pathname||"")+(i.parsedUrl.search||""),i.options.method=r,i.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(i.options.headers["user-agent"]=this.userAgent),i.options.agent=this._getAgent(i.parsedUrl),this.handlers&&this.handlers.forEach(u=>{u.prepareRequest(i.options)}),i}_mergeHeaders(r){let t=n=>Object.keys(n).reduce((i,s)=>(i[s.toLowerCase()]=n[s],i),{});return this.requestOptions&&this.requestOptions.headers?Object.assign({},t(this.requestOptions.headers),t(r)):t(r||{})}_getExistingOrDefaultHeader(r,t,n){let i=a=>Object.keys(a).reduce((u,l)=>(u[l.toLowerCase()]=a[l],u),{}),s;return this.requestOptions&&this.requestOptions.headers&&(s=i(this.requestOptions.headers)[t]),r[t]||s||n}_getAgent(r){let t,n=Ur.getProxyUrl(r),i=n&&n.hostname;if(this._keepAlive&&i&&(t=this._proxyAgent),this._keepAlive&&!i&&(t=this._agent),t)return t;let s=r.protocol==="https:",a=100;if(this.requestOptions&&(a=this.requestOptions.maxSockets||me.globalAgent.maxSockets),i){B||(B=jr());let u={maxSockets:a,keepAlive:this._keepAlive,proxy:re(ee({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},l,c=n.protocol==="https:";s?l=c?B.httpsOverHttps:B.httpsOverHttp:l=c?B.httpOverHttps:B.httpOverHttp,t=l(u),this._proxyAgent=t}if(this._keepAlive&&!t){let u={keepAlive:this._keepAlive,maxSockets:a};t=s?new je.Agent(u):new me.Agent(u),this._agent=t}return t||(t=s?je.globalAgent:me.globalAgent),s&&this._ignoreSslError&&(t.options=Object.assign(t.options||{},{rejectUnauthorized:!1})),t}_performExponentialBackoff(r){r=Math.min(qa,r);let t=ba*Math.pow(2,r);return new Promise(n=>setTimeout(()=>n(),t))}static dateTimeDeserializer(r,t){if(typeof t=="string"){let n=new Date(t);if(!isNaN(n.valueOf()))return n}return t}async _processResponse(r,t){return new Promise(async(n,i)=>{let s=r.message.statusCode,a={statusCode:s,result:null,headers:{}};s==T.NotFound&&n(a);let u,l;try{l=await r.readBody(),l&&l.length>0&&(t&&t.deserializeDates?u=JSON.parse(l,_e.dateTimeDeserializer):u=JSON.parse(l),a.result=u),a.headers=r.message.headers}catch{}if(s>299){let c;u&&u.message?c=u.message:l&&l.length>0?c=l:c="Failed request: ("+s+")";let f=new te(c,s);f.result=a.result,i(f)}else n(a)})}};q.HttpClient=_e});var kr=o(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});var Fr=class{constructor(r,t){this.username=r,this.password=t}prepareRequest(r){r.headers.Authorization="Basic "+Buffer.from(this.username+":"+this.password).toString("base64")}canHandleAuthentication(r){return!1}handleAuthentication(r,t,n){return null}};ne.BasicCredentialHandler=Fr;var Br=class{constructor(r){this.token=r}prepareRequest(r){r.headers.Authorization="Bearer "+this.token}canHandleAuthentication(r){return!1}handleAuthentication(r,t,n){return null}};ne.BearerCredentialHandler=Br;var Gr=class{constructor(r){this.token=r}prepareRequest(r){r.headers.Authorization="Basic "+Buffer.from("PAT:"+this.token).toString("base64")}canHandleAuthentication(r){return!1}handleAuthentication(r,t,n){return null}};ne.PersonalAccessTokenCredentialHandler=Gr});var Kr=o(G=>{"use strict";var $r=G&&G.__awaiter||function(e,r,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{c(n.next(f))}catch(h){a(h)}}function l(f){try{c(n.throw(f))}catch(h){a(h)}}function c(f){f.done?s(f.value):i(f.value).then(u,l)}c((n=n.apply(e,r||[])).next())})};Object.defineProperty(G,"__esModule",{value:!0});G.OidcClient=void 0;var xa=Lr(),Ta=kr(),zr=Le(),j=class{static createHttpClient(r=!0,t=10){let n={allowRetries:r,maxRetries:t};return new xa.HttpClient("actions/oidc-client",[new Ta.BearerCredentialHandler(j.getRequestToken())],n)}static getRequestToken(){let r=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!r)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return r}static getIDTokenUrl(){let r=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!r)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return r}static getCall(r){var t;return $r(this,void 0,void 0,function*(){let s=(t=(yield j.createHttpClient().getJson(r).catch(a=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${a.statusCode}
 
        Error Message: ${a.result.message}`)})).result)===null||t===void 0?void 0:t.value;if(!s)throw new Error("Response json body do not have ID Token field");return s})}static getIDToken(r){return $r(this,void 0,void 0,function*(){try{let t=j.getIDTokenUrl();if(r){let i=encodeURIComponent(r);t=`${t}&audience=${i}`}zr.debug(`ID token url is ${t}`);let n=yield j.getCall(t);return zr.setSecret(n),n}catch(t){throw new Error(`Error message: ${t.message}`)}})}};G.OidcClient=j});var Le=o(p=>{"use strict";var Sa=p&&p.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Oa=p&&p.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Vr=p&&p.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.hasOwnProperty.call(e,t)&&Sa(r,e,t);return Oa(r,e),r},Hr=p&&p.__awaiter||function(e,r,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(f){try{c(n.next(f))}catch(h){a(h)}}function l(f){try{c(n.throw(f))}catch(h){a(h)}}function c(f){f.done?s(f.value):i(f.value).then(u,l)}c((n=n.apply(e,r||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0});p.getIDToken=p.getState=p.saveState=p.group=p.endGroup=p.startGroup=p.info=p.notice=p.warning=p.error=p.debug=p.isDebug=p.setFailed=p.setCommandEcho=p.setOutput=p.getBooleanInput=p.getMultilineInput=p.getInput=p.addPath=p.setSecret=p.exportVariable=p.ExitCode=void 0;var x=Sr(),Jr=Pr(),qe=ve(),be=Vr(require("os")),Aa=Vr(require("path")),Pa=Kr(),Yr;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Yr=p.ExitCode||(p.ExitCode={}));function Ea(e,r){let t=qe.toCommandValue(r);if(process.env[e]=t,process.env.GITHUB_ENV||""){let i="_GitHubActionsFileCommandDelimeter_",s=`${e}<<${i}${be.EOL}${t}${be.EOL}${i}`;Jr.issueCommand("ENV",s)}else x.issueCommand("set-env",{name:e},t)}p.exportVariable=Ea;function Ia(e){x.issueCommand("add-mask",{},e)}p.setSecret=Ia;function Ra(e){process.env.GITHUB_PATH||""?Jr.issueCommand("PATH",e):x.issueCommand("add-path",{},e),process.env.PATH=`${e}${Aa.delimiter}${process.env.PATH}`}p.addPath=Ra;function Fe(e,r){let t=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(r&&r.required&&!t)throw new Error(`Input required and not supplied: ${e}`);return r&&r.trimWhitespace===!1?t:t.trim()}p.getInput=Fe;function Ca(e,r){return Fe(e,r).split(`
`).filter(n=>n!=="")}p.getMultilineInput=Ca;function Ma(e,r){let t=["true","True","TRUE"],n=["false","False","FALSE"],i=Fe(e,r);if(t.includes(i))return!0;if(n.includes(i))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}p.getBooleanInput=Ma;function Na(e,r){process.stdout.write(be.EOL),x.issueCommand("set-output",{name:e},r)}p.setOutput=Na;function Da(e){x.issue("echo",e?"on":"off")}p.setCommandEcho=Da;function ja(e){process.exitCode=Yr.Failure,Wr(e)}p.setFailed=ja;function Ua(){return process.env.RUNNER_DEBUG==="1"}p.isDebug=Ua;function La(e){x.issueCommand("debug",{},e)}p.debug=La;function Wr(e,r={}){x.issueCommand("error",qe.toCommandProperties(r),e instanceof Error?e.toString():e)}p.error=Wr;function Fa(e,r={}){x.issueCommand("warning",qe.toCommandProperties(r),e instanceof Error?e.toString():e)}p.warning=Fa;function Ba(e,r={}){x.issueCommand("notice",qe.toCommandProperties(r),e instanceof Error?e.toString():e)}p.notice=Ba;function Ga(e){process.stdout.write(e+be.EOL)}p.info=Ga;function Xr(e){x.issue("group",e)}p.startGroup=Xr;function Qr(){x.issue("endgroup")}p.endGroup=Qr;function ka(e,r){return Hr(this,void 0,void 0,function*(){Xr(e);let t;try{t=yield r()}finally{Qr()}return t})}p.group=ka;function $a(e,r){x.issueCommand("save-state",{name:e},r)}p.saveState=$a;function za(e){return process.env[`STATE_${e}`]||""}p.getState=za;function Ka(e){return Hr(this,void 0,void 0,function*(){return yield Pa.OidcClient.getIDToken(e)})}p.getIDToken=Ka});var Be=o((Og,Zr)=>{var Va=typeof global=="object"&&global&&global.Object===Object&&global;Zr.exports=Va});var A=o((Ag,et)=>{var Ha=Be(),Ja=typeof self=="object"&&self&&self.Object===Object&&self,Ya=Ha||Ja||Function("return this")();et.exports=Ya});var ie=o((Pg,rt)=>{var Wa=A(),Xa=Wa.Symbol;rt.exports=Xa});var st=o((Eg,it)=>{var tt=ie(),nt=Object.prototype,Qa=nt.hasOwnProperty,Za=nt.toString,se=tt?tt.toStringTag:void 0;function eu(e){var r=Qa.call(e,se),t=e[se];try{e[se]=void 0;var n=!0}catch{}var i=Za.call(e);return n&&(r?e[se]=t:delete e[se]),i}it.exports=eu});var at=o((Ig,ot)=>{var ru=Object.prototype,tu=ru.toString;function nu(e){return tu.call(e)}ot.exports=nu});var k=o((Rg,lt)=>{var ut=ie(),iu=st(),su=at(),ou="[object Null]",au="[object Undefined]",ct=ut?ut.toStringTag:void 0;function uu(e){return e==null?e===void 0?au:ou:ct&&ct in Object(e)?iu(e):su(e)}lt.exports=uu});var we=o((Cg,ft)=>{function cu(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}ft.exports=cu});var Ge=o((Mg,pt)=>{var lu=k(),fu=we(),pu="[object AsyncFunction]",hu="[object Function]",du="[object GeneratorFunction]",gu="[object Proxy]";function vu(e){if(!fu(e))return!1;var r=lu(e);return r==hu||r==du||r==pu||r==gu}pt.exports=vu});var dt=o((Ng,ht)=>{var yu=A(),mu=yu["__core-js_shared__"];ht.exports=mu});var yt=o((Dg,vt)=>{var ke=dt(),gt=function(){var e=/[^.]+$/.exec(ke&&ke.keys&&ke.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function _u(e){return!!gt&&gt in e}vt.exports=_u});var $e=o((jg,mt)=>{var qu=Function.prototype,bu=qu.toString;function wu(e){if(e!=null){try{return bu.call(e)}catch{}try{return e+""}catch{}}return""}mt.exports=wu});var qt=o((Ug,_t)=>{var xu=Ge(),Tu=yt(),Su=we(),Ou=$e(),Au=/[\\^$.*+?()[\]{}|]/g,Pu=/^\[object .+?Constructor\]$/,Eu=Function.prototype,Iu=Object.prototype,Ru=Eu.toString,Cu=Iu.hasOwnProperty,Mu=RegExp("^"+Ru.call(Cu).replace(Au,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Nu(e){if(!Su(e)||Tu(e))return!1;var r=xu(e)?Mu:Pu;return r.test(Ou(e))}_t.exports=Nu});var wt=o((Lg,bt)=>{function Du(e,r){return e==null?void 0:e[r]}bt.exports=Du});var C=o((Fg,xt)=>{var ju=qt(),Uu=wt();function Lu(e,r){var t=Uu(e,r);return ju(t)?t:void 0}xt.exports=Lu});var St=o((Bg,Tt)=>{var Fu=C(),Bu=function(){try{var e=Fu(Object,"defineProperty");return e({},"",{}),e}catch{}}();Tt.exports=Bu});var Pt=o((Gg,At)=>{var Ot=St();function Gu(e,r,t){r=="__proto__"&&Ot?Ot(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}At.exports=Gu});var It=o((kg,Et)=>{function ku(e){return function(r,t,n){for(var i=-1,s=Object(r),a=n(r),u=a.length;u--;){var l=a[e?u:++i];if(t(s[l],l,s)===!1)break}return r}}Et.exports=ku});var Ct=o(($g,Rt)=>{var $u=It(),zu=$u();Rt.exports=zu});var Nt=o((zg,Mt)=>{function Ku(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}Mt.exports=Ku});var $=o((Kg,Dt)=>{function Vu(e){return e!=null&&typeof e=="object"}Dt.exports=Vu});var Ut=o((Vg,jt)=>{var Hu=k(),Ju=$(),Yu="[object Arguments]";function Wu(e){return Ju(e)&&Hu(e)==Yu}jt.exports=Wu});var ze=o((Hg,Bt)=>{var Lt=Ut(),Xu=$(),Ft=Object.prototype,Qu=Ft.hasOwnProperty,Zu=Ft.propertyIsEnumerable,ec=Lt(function(){return arguments}())?Lt:function(e){return Xu(e)&&Qu.call(e,"callee")&&!Zu.call(e,"callee")};Bt.exports=ec});var E=o((Jg,Gt)=>{var rc=Array.isArray;Gt.exports=rc});var $t=o((Yg,kt)=>{function tc(){return!1}kt.exports=tc});var Ke=o((oe,z)=>{var nc=A(),ic=$t(),zt=typeof oe=="object"&&oe&&!oe.nodeType&&oe,Kt=zt&&typeof z=="object"&&z&&!z.nodeType&&z,sc=Kt&&Kt.exports===zt,Vt=sc?nc.Buffer:void 0,oc=Vt?Vt.isBuffer:void 0,ac=oc||ic;z.exports=ac});var Ve=o((Wg,Ht)=>{var uc=9007199254740991,cc=/^(?:0|[1-9]\d*)$/;function lc(e,r){var t=typeof e;return r=r??uc,!!r&&(t=="number"||t!="symbol"&&cc.test(e))&&e>-1&&e%1==0&&e<r}Ht.exports=lc});var xe=o((Xg,Jt)=>{var fc=9007199254740991;function pc(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=fc}Jt.exports=pc});var Wt=o((Qg,Yt)=>{var hc=k(),dc=xe(),gc=$(),vc="[object Arguments]",yc="[object Array]",mc="[object Boolean]",_c="[object Date]",qc="[object Error]",bc="[object Function]",wc="[object Map]",xc="[object Number]",Tc="[object Object]",Sc="[object RegExp]",Oc="[object Set]",Ac="[object String]",Pc="[object WeakMap]",Ec="[object ArrayBuffer]",Ic="[object DataView]",Rc="[object Float32Array]",Cc="[object Float64Array]",Mc="[object Int8Array]",Nc="[object Int16Array]",Dc="[object Int32Array]",jc="[object Uint8Array]",Uc="[object Uint8ClampedArray]",Lc="[object Uint16Array]",Fc="[object Uint32Array]",v={};v[Rc]=v[Cc]=v[Mc]=v[Nc]=v[Dc]=v[jc]=v[Uc]=v[Lc]=v[Fc]=!0;v[vc]=v[yc]=v[Ec]=v[mc]=v[Ic]=v[_c]=v[qc]=v[bc]=v[wc]=v[xc]=v[Tc]=v[Sc]=v[Oc]=v[Ac]=v[Pc]=!1;function Bc(e){return gc(e)&&dc(e.length)&&!!v[hc(e)]}Yt.exports=Bc});var Qt=o((Zg,Xt)=>{function Gc(e){return function(r){return e(r)}}Xt.exports=Gc});var en=o((ue,K)=>{var kc=Be(),Zt=typeof ue=="object"&&ue&&!ue.nodeType&&ue,ae=Zt&&typeof K=="object"&&K&&!K.nodeType&&K,$c=ae&&ae.exports===Zt,He=$c&&kc.process,zc=function(){try{var e=ae&&ae.require&&ae.require("util").types;return e||He&&He.binding&&He.binding("util")}catch{}}();K.exports=zc});var Je=o((ev,nn)=>{var Kc=Wt(),Vc=Qt(),rn=en(),tn=rn&&rn.isTypedArray,Hc=tn?Vc(tn):Kc;nn.exports=Hc});var on=o((rv,sn)=>{var Jc=Nt(),Yc=ze(),Wc=E(),Xc=Ke(),Qc=Ve(),Zc=Je(),el=Object.prototype,rl=el.hasOwnProperty;function tl(e,r){var t=Wc(e),n=!t&&Yc(e),i=!t&&!n&&Xc(e),s=!t&&!n&&!i&&Zc(e),a=t||n||i||s,u=a?Jc(e.length,String):[],l=u.length;for(var c in e)(r||rl.call(e,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Qc(c,l)))&&u.push(c);return u}sn.exports=tl});var un=o((tv,an)=>{var nl=Object.prototype;function il(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||nl;return e===t}an.exports=il});var ln=o((nv,cn)=>{function sl(e,r){return function(t){return e(r(t))}}cn.exports=sl});var pn=o((iv,fn)=>{var ol=ln(),al=ol(Object.keys,Object);fn.exports=al});var dn=o((sv,hn)=>{var ul=un(),cl=pn(),ll=Object.prototype,fl=ll.hasOwnProperty;function pl(e){if(!ul(e))return cl(e);var r=[];for(var t in Object(e))fl.call(e,t)&&t!="constructor"&&r.push(t);return r}hn.exports=pl});var vn=o((ov,gn)=>{var hl=Ge(),dl=xe();function gl(e){return e!=null&&dl(e.length)&&!hl(e)}gn.exports=gl});var Te=o((av,yn)=>{var vl=on(),yl=dn(),ml=vn();function _l(e){return ml(e)?vl(e):yl(e)}yn.exports=_l});var _n=o((uv,mn)=>{var ql=Ct(),bl=Te();function wl(e,r){return e&&ql(e,r,bl)}mn.exports=wl});var bn=o((cv,qn)=>{function xl(){this.__data__=[],this.size=0}qn.exports=xl});var Ye=o((lv,wn)=>{function Tl(e,r){return e===r||e!==e&&r!==r}wn.exports=Tl});var ce=o((fv,xn)=>{var Sl=Ye();function Ol(e,r){for(var t=e.length;t--;)if(Sl(e[t][0],r))return t;return-1}xn.exports=Ol});var Sn=o((pv,Tn)=>{var Al=ce(),Pl=Array.prototype,El=Pl.splice;function Il(e){var r=this.__data__,t=Al(r,e);if(t<0)return!1;var n=r.length-1;return t==n?r.pop():El.call(r,t,1),--this.size,!0}Tn.exports=Il});var An=o((hv,On)=>{var Rl=ce();function Cl(e){var r=this.__data__,t=Rl(r,e);return t<0?void 0:r[t][1]}On.exports=Cl});var En=o((dv,Pn)=>{var Ml=ce();function Nl(e){return Ml(this.__data__,e)>-1}Pn.exports=Nl});var Rn=o((gv,In)=>{var Dl=ce();function jl(e,r){var t=this.__data__,n=Dl(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this}In.exports=jl});var le=o((vv,Cn)=>{var Ul=bn(),Ll=Sn(),Fl=An(),Bl=En(),Gl=Rn();function V(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}V.prototype.clear=Ul;V.prototype.delete=Ll;V.prototype.get=Fl;V.prototype.has=Bl;V.prototype.set=Gl;Cn.exports=V});var Nn=o((yv,Mn)=>{var kl=le();function $l(){this.__data__=new kl,this.size=0}Mn.exports=$l});var jn=o((mv,Dn)=>{function zl(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}Dn.exports=zl});var Ln=o((_v,Un)=>{function Kl(e){return this.__data__.get(e)}Un.exports=Kl});var Bn=o((qv,Fn)=>{function Vl(e){return this.__data__.has(e)}Fn.exports=Vl});var Se=o((bv,Gn)=>{var Hl=C(),Jl=A(),Yl=Hl(Jl,"Map");Gn.exports=Yl});var fe=o((wv,kn)=>{var Wl=C(),Xl=Wl(Object,"create");kn.exports=Xl});var Kn=o((xv,zn)=>{var $n=fe();function Ql(){this.__data__=$n?$n(null):{},this.size=0}zn.exports=Ql});var Hn=o((Tv,Vn)=>{function Zl(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}Vn.exports=Zl});var Yn=o((Sv,Jn)=>{var ef=fe(),rf="__lodash_hash_undefined__",tf=Object.prototype,nf=tf.hasOwnProperty;function sf(e){var r=this.__data__;if(ef){var t=r[e];return t===rf?void 0:t}return nf.call(r,e)?r[e]:void 0}Jn.exports=sf});var Xn=o((Ov,Wn)=>{var of=fe(),af=Object.prototype,uf=af.hasOwnProperty;function cf(e){var r=this.__data__;return of?r[e]!==void 0:uf.call(r,e)}Wn.exports=cf});var Zn=o((Av,Qn)=>{var lf=fe(),ff="__lodash_hash_undefined__";function pf(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=lf&&r===void 0?ff:r,this}Qn.exports=pf});var ri=o((Pv,ei)=>{var hf=Kn(),df=Hn(),gf=Yn(),vf=Xn(),yf=Zn();function H(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}H.prototype.clear=hf;H.prototype.delete=df;H.prototype.get=gf;H.prototype.has=vf;H.prototype.set=yf;ei.exports=H});var ii=o((Ev,ni)=>{var ti=ri(),mf=le(),_f=Se();function qf(){this.size=0,this.__data__={hash:new ti,map:new(_f||mf),string:new ti}}ni.exports=qf});var oi=o((Iv,si)=>{function bf(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}si.exports=bf});var pe=o((Rv,ai)=>{var wf=oi();function xf(e,r){var t=e.__data__;return wf(r)?t[typeof r=="string"?"string":"hash"]:t.map}ai.exports=xf});var ci=o((Cv,ui)=>{var Tf=pe();function Sf(e){var r=Tf(this,e).delete(e);return this.size-=r?1:0,r}ui.exports=Sf});var fi=o((Mv,li)=>{var Of=pe();function Af(e){return Of(this,e).get(e)}li.exports=Af});var hi=o((Nv,pi)=>{var Pf=pe();function Ef(e){return Pf(this,e).has(e)}pi.exports=Ef});var gi=o((Dv,di)=>{var If=pe();function Rf(e,r){var t=If(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this}di.exports=Rf});var Oe=o((jv,vi)=>{var Cf=ii(),Mf=ci(),Nf=fi(),Df=hi(),jf=gi();function J(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}J.prototype.clear=Cf;J.prototype.delete=Mf;J.prototype.get=Nf;J.prototype.has=Df;J.prototype.set=jf;vi.exports=J});var mi=o((Uv,yi)=>{var Uf=le(),Lf=Se(),Ff=Oe(),Bf=200;function Gf(e,r){var t=this.__data__;if(t instanceof Uf){var n=t.__data__;if(!Lf||n.length<Bf-1)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new Ff(n)}return t.set(e,r),this.size=t.size,this}yi.exports=Gf});var We=o((Lv,_i)=>{var kf=le(),$f=Nn(),zf=jn(),Kf=Ln(),Vf=Bn(),Hf=mi();function Y(e){var r=this.__data__=new kf(e);this.size=r.size}Y.prototype.clear=$f;Y.prototype.delete=zf;Y.prototype.get=Kf;Y.prototype.has=Vf;Y.prototype.set=Hf;_i.exports=Y});var bi=o((Fv,qi)=>{var Jf="__lodash_hash_undefined__";function Yf(e){return this.__data__.set(e,Jf),this}qi.exports=Yf});var xi=o((Bv,wi)=>{function Wf(e){return this.__data__.has(e)}wi.exports=Wf});var Si=o((Gv,Ti)=>{var Xf=Oe(),Qf=bi(),Zf=xi();function Ae(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new Xf;++r<t;)this.add(e[r])}Ae.prototype.add=Ae.prototype.push=Qf;Ae.prototype.has=Zf;Ti.exports=Ae});var Ai=o((kv,Oi)=>{function ep(e,r){for(var t=-1,n=e==null?0:e.length;++t<n;)if(r(e[t],t,e))return!0;return!1}Oi.exports=ep});var Ei=o(($v,Pi)=>{function rp(e,r){return e.has(r)}Pi.exports=rp});var Xe=o((zv,Ii)=>{var tp=Si(),np=Ai(),ip=Ei(),sp=1,op=2;function ap(e,r,t,n,i,s){var a=t&sp,u=e.length,l=r.length;if(u!=l&&!(a&&l>u))return!1;var c=s.get(e),f=s.get(r);if(c&&f)return c==r&&f==e;var h=-1,d=!0,y=t&op?new tp:void 0;for(s.set(e,r),s.set(r,e);++h<u;){var g=e[h],b=r[h];if(n)var S=a?n(b,g,h,r,e,s):n(g,b,h,e,r,s);if(S!==void 0){if(S)continue;d=!1;break}if(y){if(!np(r,function(M,N){if(!ip(y,N)&&(g===M||i(g,M,t,n,s)))return y.push(N)})){d=!1;break}}else if(!(g===b||i(g,b,t,n,s))){d=!1;break}}return s.delete(e),s.delete(r),d}Ii.exports=ap});var Ci=o((Kv,Ri)=>{var up=A(),cp=up.Uint8Array;Ri.exports=cp});var Ni=o((Vv,Mi)=>{function lp(e){var r=-1,t=Array(e.size);return e.forEach(function(n,i){t[++r]=[i,n]}),t}Mi.exports=lp});var ji=o((Hv,Di)=>{function fp(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=n}),t}Di.exports=fp});var Gi=o((Jv,Bi)=>{var Ui=ie(),Li=Ci(),pp=Ye(),hp=Xe(),dp=Ni(),gp=ji(),vp=1,yp=2,mp="[object Boolean]",_p="[object Date]",qp="[object Error]",bp="[object Map]",wp="[object Number]",xp="[object RegExp]",Tp="[object Set]",Sp="[object String]",Op="[object Symbol]",Ap="[object ArrayBuffer]",Pp="[object DataView]",Fi=Ui?Ui.prototype:void 0,Qe=Fi?Fi.valueOf:void 0;function Ep(e,r,t,n,i,s,a){switch(t){case Pp:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Ap:return!(e.byteLength!=r.byteLength||!s(new Li(e),new Li(r)));case mp:case _p:case wp:return pp(+e,+r);case qp:return e.name==r.name&&e.message==r.message;case xp:case Sp:return e==r+"";case bp:var u=dp;case Tp:var l=n&vp;if(u||(u=gp),e.size!=r.size&&!l)return!1;var c=a.get(e);if(c)return c==r;n|=yp,a.set(e,r);var f=hp(u(e),u(r),n,i,s,a);return a.delete(e),f;case Op:if(Qe)return Qe.call(e)==Qe.call(r)}return!1}Bi.exports=Ep});var $i=o((Yv,ki)=>{function Ip(e,r){for(var t=-1,n=r.length,i=e.length;++t<n;)e[i+t]=r[t];return e}ki.exports=Ip});var Ki=o((Wv,zi)=>{var Rp=$i(),Cp=E();function Mp(e,r,t){var n=r(e);return Cp(e)?n:Rp(n,t(e))}zi.exports=Mp});var Hi=o((Xv,Vi)=>{function Np(e,r){for(var t=-1,n=e==null?0:e.length,i=0,s=[];++t<n;){var a=e[t];r(a,t,e)&&(s[i++]=a)}return s}Vi.exports=Np});var Yi=o((Qv,Ji)=>{function Dp(){return[]}Ji.exports=Dp});var Qi=o((Zv,Xi)=>{var jp=Hi(),Up=Yi(),Lp=Object.prototype,Fp=Lp.propertyIsEnumerable,Wi=Object.getOwnPropertySymbols,Bp=Wi?function(e){return e==null?[]:(e=Object(e),jp(Wi(e),function(r){return Fp.call(e,r)}))}:Up;Xi.exports=Bp});var es=o((ey,Zi)=>{var Gp=Ki(),kp=Qi(),$p=Te();function zp(e){return Gp(e,$p,kp)}Zi.exports=zp});var ns=o((ry,ts)=>{var rs=es(),Kp=1,Vp=Object.prototype,Hp=Vp.hasOwnProperty;function Jp(e,r,t,n,i,s){var a=t&Kp,u=rs(e),l=u.length,c=rs(r),f=c.length;if(l!=f&&!a)return!1;for(var h=l;h--;){var d=u[h];if(!(a?d in r:Hp.call(r,d)))return!1}var y=s.get(e),g=s.get(r);if(y&&g)return y==r&&g==e;var b=!0;s.set(e,r),s.set(r,e);for(var S=a;++h<l;){d=u[h];var M=e[d],N=r[d];if(n)var gr=a?n(N,M,d,r,e,s):n(M,N,d,e,r,s);if(!(gr===void 0?M===N||i(M,N,t,n,s):gr)){b=!1;break}S||(S=d=="constructor")}if(b&&!S){var de=e.constructor,ge=r.constructor;de!=ge&&"constructor"in e&&"constructor"in r&&!(typeof de=="function"&&de instanceof de&&typeof ge=="function"&&ge instanceof ge)&&(b=!1)}return s.delete(e),s.delete(r),b}ts.exports=Jp});var ss=o((ty,is)=>{var Yp=C(),Wp=A(),Xp=Yp(Wp,"DataView");is.exports=Xp});var as=o((ny,os)=>{var Qp=C(),Zp=A(),eh=Qp(Zp,"Promise");os.exports=eh});var cs=o((iy,us)=>{var rh=C(),th=A(),nh=rh(th,"Set");us.exports=nh});var fs=o((sy,ls)=>{var ih=C(),sh=A(),oh=ih(sh,"WeakMap");ls.exports=oh});var _s=o((oy,ms)=>{var Ze=ss(),er=Se(),rr=as(),tr=cs(),nr=fs(),ps=k(),W=$e(),hs="[object Map]",ah="[object Object]",ds="[object Promise]",gs="[object Set]",vs="[object WeakMap]",ys="[object DataView]",uh=W(Ze),ch=W(er),lh=W(rr),fh=W(tr),ph=W(nr),U=ps;(Ze&&U(new Ze(new ArrayBuffer(1)))!=ys||er&&U(new er)!=hs||rr&&U(rr.resolve())!=ds||tr&&U(new tr)!=gs||nr&&U(new nr)!=vs)&&(U=function(e){var r=ps(e),t=r==ah?e.constructor:void 0,n=t?W(t):"";if(n)switch(n){case uh:return ys;case ch:return hs;case lh:return ds;case fh:return gs;case ph:return vs}return r});ms.exports=U});var As=o((ay,Os)=>{var ir=We(),hh=Xe(),dh=Gi(),gh=ns(),qs=_s(),bs=E(),ws=Ke(),vh=Je(),yh=1,xs="[object Arguments]",Ts="[object Array]",Pe="[object Object]",mh=Object.prototype,Ss=mh.hasOwnProperty;function _h(e,r,t,n,i,s){var a=bs(e),u=bs(r),l=a?Ts:qs(e),c=u?Ts:qs(r);l=l==xs?Pe:l,c=c==xs?Pe:c;var f=l==Pe,h=c==Pe,d=l==c;if(d&&ws(e)){if(!ws(r))return!1;a=!0,f=!1}if(d&&!f)return s||(s=new ir),a||vh(e)?hh(e,r,t,n,i,s):dh(e,r,l,t,n,i,s);if(!(t&yh)){var y=f&&Ss.call(e,"__wrapped__"),g=h&&Ss.call(r,"__wrapped__");if(y||g){var b=y?e.value():e,S=g?r.value():r;return s||(s=new ir),i(b,S,t,n,s)}}return d?(s||(s=new ir),gh(e,r,t,n,i,s)):!1}Os.exports=_h});var sr=o((uy,Is)=>{var qh=As(),Ps=$();function Es(e,r,t,n,i){return e===r?!0:e==null||r==null||!Ps(e)&&!Ps(r)?e!==e&&r!==r:qh(e,r,t,n,Es,i)}Is.exports=Es});var Cs=o((cy,Rs)=>{var bh=We(),wh=sr(),xh=1,Th=2;function Sh(e,r,t,n){var i=t.length,s=i,a=!n;if(e==null)return!s;for(e=Object(e);i--;){var u=t[i];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<s;){u=t[i];var l=u[0],c=e[l],f=u[1];if(a&&u[2]){if(c===void 0&&!(l in e))return!1}else{var h=new bh;if(n)var d=n(c,f,l,e,r,h);if(!(d===void 0?wh(f,c,xh|Th,n,h):d))return!1}}return!0}Rs.exports=Sh});var or=o((ly,Ms)=>{var Oh=we();function Ah(e){return e===e&&!Oh(e)}Ms.exports=Ah});var Ds=o((fy,Ns)=>{var Ph=or(),Eh=Te();function Ih(e){for(var r=Eh(e),t=r.length;t--;){var n=r[t],i=e[n];r[t]=[n,i,Ph(i)]}return r}Ns.exports=Ih});var ar=o((py,js)=>{function Rh(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==void 0||e in Object(t))}}js.exports=Rh});var Ls=o((hy,Us)=>{var Ch=Cs(),Mh=Ds(),Nh=ar();function Dh(e){var r=Mh(e);return r.length==1&&r[0][2]?Nh(r[0][0],r[0][1]):function(t){return t===e||Ch(t,e,r)}}Us.exports=Dh});var Ee=o((dy,Fs)=>{var jh=k(),Uh=$(),Lh="[object Symbol]";function Fh(e){return typeof e=="symbol"||Uh(e)&&jh(e)==Lh}Fs.exports=Fh});var Ie=o((gy,Bs)=>{var Bh=E(),Gh=Ee(),kh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$h=/^\w*$/;function zh(e,r){if(Bh(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||Gh(e)?!0:$h.test(e)||!kh.test(e)||r!=null&&e in Object(r)}Bs.exports=zh});var $s=o((vy,ks)=>{var Gs=Oe(),Kh="Expected a function";function ur(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(Kh);var t=function(){var n=arguments,i=r?r.apply(this,n):n[0],s=t.cache;if(s.has(i))return s.get(i);var a=e.apply(this,n);return t.cache=s.set(i,a)||s,a};return t.cache=new(ur.Cache||Gs),t}ur.Cache=Gs;ks.exports=ur});var Ks=o((yy,zs)=>{var Vh=$s(),Hh=500;function Jh(e){var r=Vh(e,function(n){return t.size===Hh&&t.clear(),n}),t=r.cache;return r}zs.exports=Jh});var Hs=o((my,Vs)=>{var Yh=Ks(),Wh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xh=/\\(\\)?/g,Qh=Yh(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(Wh,function(t,n,i,s){r.push(i?s.replace(Xh,"$1"):n||t)}),r});Vs.exports=Qh});var Ys=o((_y,Js)=>{function Zh(e,r){for(var t=-1,n=e==null?0:e.length,i=Array(n);++t<n;)i[t]=r(e[t],t,e);return i}Js.exports=Zh});var ro=o((qy,eo)=>{var Ws=ie(),ed=Ys(),rd=E(),td=Ee(),nd=1/0,Xs=Ws?Ws.prototype:void 0,Qs=Xs?Xs.toString:void 0;function Zs(e){if(typeof e=="string")return e;if(rd(e))return ed(e,Zs)+"";if(td(e))return Qs?Qs.call(e):"";var r=e+"";return r=="0"&&1/e==-nd?"-0":r}eo.exports=Zs});var no=o((by,to)=>{var id=ro();function sd(e){return e==null?"":id(e)}to.exports=sd});var cr=o((wy,io)=>{var od=E(),ad=Ie(),ud=Hs(),cd=no();function ld(e,r){return od(e)?e:ad(e,r)?[e]:ud(cd(e))}io.exports=ld});var he=o((xy,so)=>{var fd=Ee(),pd=1/0;function hd(e){if(typeof e=="string"||fd(e))return e;var r=e+"";return r=="0"&&1/e==-pd?"-0":r}so.exports=hd});var lr=o((Ty,oo)=>{var dd=cr(),gd=he();function vd(e,r){r=dd(r,e);for(var t=0,n=r.length;e!=null&&t<n;)e=e[gd(r[t++])];return t&&t==n?e:void 0}oo.exports=vd});var uo=o((Sy,ao)=>{var yd=lr();function md(e,r,t){var n=e==null?void 0:yd(e,r);return n===void 0?t:n}ao.exports=md});var lo=o((Oy,co)=>{function _d(e,r){return e!=null&&r in Object(e)}co.exports=_d});var po=o((Ay,fo)=>{var qd=cr(),bd=ze(),wd=E(),xd=Ve(),Td=xe(),Sd=he();function Od(e,r,t){r=qd(r,e);for(var n=-1,i=r.length,s=!1;++n<i;){var a=Sd(r[n]);if(!(s=e!=null&&t(e,a)))break;e=e[a]}return s||++n!=i?s:(i=e==null?0:e.length,!!i&&Td(i)&&xd(a,i)&&(wd(e)||bd(e)))}fo.exports=Od});var go=o((Py,ho)=>{var Ad=lo(),Pd=po();function Ed(e,r){return e!=null&&Pd(e,r,Ad)}ho.exports=Ed});var yo=o((Ey,vo)=>{var Id=sr(),Rd=uo(),Cd=go(),Md=Ie(),Nd=or(),Dd=ar(),jd=he(),Ud=1,Ld=2;function Fd(e,r){return Md(e)&&Nd(r)?Dd(jd(e),r):function(t){var n=Rd(t,e);return n===void 0&&n===r?Cd(t,e):Id(r,n,Ud|Ld)}}vo.exports=Fd});var _o=o((Iy,mo)=>{function Bd(e){return e}mo.exports=Bd});var bo=o((Ry,qo)=>{function Gd(e){return function(r){return r==null?void 0:r[e]}}qo.exports=Gd});var xo=o((Cy,wo)=>{var kd=lr();function $d(e){return function(r){return kd(r,e)}}wo.exports=$d});var So=o((My,To)=>{var zd=bo(),Kd=xo(),Vd=Ie(),Hd=he();function Jd(e){return Vd(e)?zd(Hd(e)):Kd(e)}To.exports=Jd});var Ao=o((Ny,Oo)=>{var Yd=Ls(),Wd=yo(),Xd=_o(),Qd=E(),Zd=So();function eg(e){return typeof e=="function"?e:e==null?Xd:typeof e=="object"?Qd(e)?Wd(e[0],e[1]):Yd(e):Zd(e)}Oo.exports=eg});var Eo=o((Dy,Po)=>{var rg=Pt(),tg=_n(),ng=Ao();function ig(e,r){var t={};return r=ng(r,3),tg(e,function(n,i,s){rg(t,i,r(n,i,s))}),t}Po.exports=ig});var pg={};Vo(pg,{readTerraformConfig:()=>Lo,readTerragruntDependencies:()=>Uo});var m=D(Le()),Q=D(require("fs")),jo=D(Eo());var X=D(require("node:path"),1);var Ro=D(require("node:process"),1),Co=D(require("node:path"),1),Me=D(require("node:fs"),1);var Io=class{value;next;constructor(r){this.value=r}},Re=class{#e;#r;#t;constructor(){this.clear()}enqueue(r){let t=new Io(r);this.#e?(this.#r.next=t,this.#r=t):(this.#e=t,this.#r=t),this.#t++}dequeue(){let r=this.#e;if(!!r)return this.#e=this.#e.next,this.#t--,r.value}clear(){this.#e=void 0,this.#r=void 0,this.#t=0}get size(){return this.#t}*[Symbol.iterator](){let r=this.#e;for(;r;)yield r.value,r=r.next}};function Ce(e){if(!((Number.isInteger(e)||e===Number.POSITIVE_INFINITY)&&e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");let r=new Re,t=0,n=()=>{t--,r.size>0&&r.dequeue()()},i=async(u,l,c)=>{t++;let f=(async()=>u(...c))();l(f);try{await f}catch{}n()},s=(u,l,c)=>{r.enqueue(i.bind(void 0,u,l,c)),(async()=>(await Promise.resolve(),t<e&&r.size>0&&r.dequeue()()))()},a=(u,...l)=>new Promise(c=>{s(u,c,l)});return Object.defineProperties(a,{activeCount:{get:()=>t},pendingCount:{get:()=>r.size},clearQueue:{value:()=>{r.clear()}}}),a}var fr=class extends Error{constructor(r){super();this.value=r}},sg=async(e,r)=>r(await e),og=async e=>{let r=await Promise.all(e);if(r[1]===!0)throw new fr(r[0]);return!1};async function pr(e,r,{concurrency:t=Number.POSITIVE_INFINITY,preserveOrder:n=!0}={}){let i=Ce(t),s=[...e].map(u=>[u,i(sg,u,r)]),a=Ce(n?1:Number.POSITIVE_INFINITY);try{await Promise.all(s.map(u=>a(og,u)))}catch(u){if(u instanceof fr)return u.value;throw u}}var Mo={directory:"isDirectory",file:"isFile"};function ag(e){if(!(e in Mo))throw new Error(`Invalid type specified: ${e}`)}var ug=(e,r)=>e===void 0||r[Mo[e]]();async function hr(e,{cwd:r=Ro.default.cwd(),type:t="file",allowSymlinks:n=!0,concurrency:i,preserveOrder:s}={}){ag(t);let a=n?Me.promises.stat:Me.promises.lstat;return pr(e,async u=>{try{let l=await a(Co.default.resolve(r,u));return ug(t,l)}catch{return!1}},{concurrency:i,preserveOrder:s})}var cg=Symbol("findUpStop");async function lg(e,r={}){let t=X.default.resolve(r.cwd||""),{root:n}=X.default.parse(t),i=X.default.resolve(t,r.stopAt||n),s=r.limit||Number.POSITIVE_INFINITY,a=[e].flat(),u=async c=>{if(typeof e!="function")return hr(a,c);let f=await e(c.cwd);return typeof f=="string"?hr([f],c):f},l=[];for(;;){let c=await u(re(ee({},r),{cwd:t}));if(c===cg||(c&&l.push(X.default.resolve(t,c)),t===i||l.length>=s))break;t=X.default.dirname(t)}return l}async function No(e,r={}){return(await lg(e,re(ee({},r),{limit:1})))[0]}var Do=require("fs");async function dr(e,r){let t=await No(r,{cwd:e});if(!t)throw new Error(`Could not find ${r} in folder or parents`);return(0,Do.readFileSync)(t,"utf-8").trim()}function Uo(e){return e.split(`
`).map(r=>r.match(/^\s*config_path\s+?=\s+?"(.+?)"/)).filter(r=>Boolean(r)).map(([,r])=>r)}async function Lo({terraformRoot:e,secrets:r}){let t=await dr(e,".terraform-version"),n=await dr(e,".terragrunt-version"),i=[],s,a,u,l,c="SHARED",f={},h=!1;if(Q.existsSync(`${e}/terragrunt.hcl`)){h=!0;let y=Q.readFileSync(`${e}/terragrunt.hcl`,"utf8");i=Uo(y)}let d=`${e}/tf-pr-action.config.json`;if(Q.existsSync(d)){let y=Q.readFileSync(d,"utf-8"),g=JSON.parse(y);g.workloadIdentityProjectId&&(s=g.workloadIdentityProjectId),g.workloadIdentityProjectNumber&&(a=g.workloadIdentityProjectNumber),g.serviceAccountSecret&&(u=g.serviceAccountSecret,l=r[g.serviceAccountSecret]),g.environment&&(c=g.environment),g.tfVarToSecretMap&&(f=(0,jo.default)(g.tfVarToSecretMap,S=>r[S]))}else m.info("No ts-pr-action.config.json found. If this module needs to run as a specific SA, add a ts-pr-action.config.json.");return{tfVersion:t,tgVersion:n,tgDependencies:i,saSecret:u,saSecretKey:l,environment:c,tfVars:f,workloadIdentityProjectId:s,workloadIdentityProjectNumber:a,isTerragruntModule:h}}async function fg(){try{let e=m.getInput("cwd"),r=JSON.parse(m.getInput("secrets_json")||"{}"),{tfVars:t,tfVersion:n,tgDependencies:i,tgVersion:s,environment:a,saSecret:u,saSecretKey:l,workloadIdentityProjectId:c,workloadIdentityProjectNumber:f}=await Lo({terraformRoot:e,secrets:r});m.setOutput("tf_version",n),m.setOutput("tg_version",s),Object.keys(t).length>0&&m.setOutput("tf_vars",JSON.stringify(t)),m.setOutput("tg_dependencies",i),a&&m.setOutput("environment",a),u&&m.setOutput("sa_secret",u),l&&m.setOutput("sa_secret_key",l),c&&m.setOutput("workload_identity_project_id",c),f&&m.setOutput("workload_identity_project_number",f)}catch(e){m.setFailed(e)}}fg();module.exports=Ho(pg);0&&(module.exports={readTerraformConfig,readTerragruntDependencies});
